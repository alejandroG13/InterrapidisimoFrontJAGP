<div class="flex h-screen bg-gray-100">

    <mat-card class="w-screen" appearance="outlined">

        <div class="grid grid-cols-3 items-center mt-3 w-full">
            <div></div>

            <!-- Título centrado -->
            <h1 class="text-4xl font-bold text-center">Hola {{ nombreEstudiante }}</h1>

            <!-- Botón a la derecha -->
            <div class="flex justify-end">
                <button mat-raised-button class="h-11 !bg-red-600 !text-white" type="submit" (click)="logout()">
                    Salir
                </button>
            </div>
        </div>


        <mat-card-header>
            <mat-card-title>Inscribe tus materias</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <!-- Tabla de materias-->
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

                <!-- Checkbox Column -->
                <ng-container matColumnDef="select">
                    <th mat-header-cell *matHeaderCellDef>
                        <mat-checkbox (change)="$event ? toggleAllRows() : null"
                            [checked]="selection.hasValue() && isAllSelected()"
                            [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
                        </mat-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let row">
                        <mat-checkbox (click)="$event.stopPropagation()"
                            (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)"
                            [aria-label]="checkboxLabel(row)">
                        </mat-checkbox>
                    </td>
                </ng-container>

                <!-- Position Column -->
                <ng-container matColumnDef="position">
                    <th mat-header-cell *matHeaderCellDef> No. </th>
                    <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                </ng-container>

                <!-- Nombre Materia -->
                <ng-container matColumnDef="nombreMateria">
                    <th mat-header-cell *matHeaderCellDef> Materia </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.nombreMateria }}
                    </td>
                </ng-container>

                <!-- Profesor -->
                <ng-container matColumnDef="nombreProfesor">
                    <th mat-header-cell *matHeaderCellDef> Profesor </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.nombreProfesor }}
                    </td>
                </ng-container>

                <!-- Estudiantes -->
                <ng-container matColumnDef="estudiantes">
                    <th mat-header-cell *matHeaderCellDef>
                        Estudiantes Inscritos
                    </th>

                    <td mat-cell *matCellDef="let element">
                        <ul class="list-disc pl-4 max-h-24 overflow-auto">
                            @for (e of element.estudiantesInscritos || []; track e) {
                            <li>{{ e }}</li>
                            }
                        </ul>
                    </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)">
                </tr>
            </table>
        </mat-card-content>
        <mat-card-footer class="example-card-footer flex justify-end">
            <button mat-raised-button color="secodary" class="h-11 mt-2 mr-3" type="submit"
                [disabled]="maxMateriasAlcanzado" (click)="inscribir()">
                Inscribir
            </button>
        </mat-card-footer>

    </mat-card>

</div>